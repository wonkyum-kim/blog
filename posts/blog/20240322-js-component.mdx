---
title: ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ Web Component ë§Œë“¤ê¸°
date: 2024-03-22
description: ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“œëŠ” ë°©ë²•ë“¤ê³¼ ì „ì—­ ìƒíƒœ ì ìš©í•´ë³´ê¸°
tags:
  - JavaScript
---

## Web Componentë¥¼ ë§Œë“œëŠ” ë°©ë²•ë“¤

ReactëŠ” JSXë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ í•©ì„±(composition)í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì›¹ í˜ì´ì§€ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

```tsx
function HelloWorld() {
  return <div>Hello World!</div>;
}
```

ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” 3ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. Shadow DOM
2. Template
3. Custom elements

### 1. Shadow DOM

HTML ë¬¸ì„œì—ì„œ `<input type='range'>`ë¥¼ ì…ë ¥í–ˆì„ ë•Œ ì¶œë ¥ ë˜ëŠ” ê²ƒì€ ì‚¬ì‹¤ í•˜ë‚˜ê°€ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ê°œì˜ ìˆ¨ê²¨ì§„ `<div>` íƒœê·¸ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ ì—¬ëŸ¬ ê°œì˜ ìˆ¨ê²¨ì§„ íƒœê·¸ë¥¼ ìˆ¨ê²¨ì„œ í•˜ë‚˜ì˜ íƒœê·¸ë¡œ ë‚˜íƒ€ë‚´ëŠ” ë°©ë²•ì„ Shadow DOM ì´ë¼ê³  í•©ë‹ˆë‹¤.

### 2. Template

ì¬í™œìš© ê°€ëŠ¥í•œ DOM êµ¬ì¡°ë¥¼ HTML ì–´ë”˜ê°€ì— ì ì–´ë‘ê³ 

```html
<template id="my-template">
  <div>Hello World!</div>
</template>

<div id="target"></div>
```

JSë¥¼ ì‚¬ìš©í•´ ê°€ì ¸ì™€ì„œ ì¬ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

```js
const templateElement = document.getElementById('my-template);
const contents = templateElement.content;
document.getElementById('target').appendChild(contents.cloneNode(true));
```

### 3.Custom elements

Custom elementsëŠ” HTML íƒœê·¸ ìì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

```js
class MyElement extends HTMLElement {
  constructor() {
    super();
    // element created
  }

  connectedCallback() {
    // browser calls this method when the element is added to the document
    // (can be called many times if an element is repeatedly added/removed)
  }

  disconnectedCallback() {
    // browser calls this method when the element is removed from the document
    // (can be called many times if an element is repeatedly added/removed)
  }

  static get observedAttributes() {
    return [
      /* array of attribute names to monitor for changes */
    ];
  }

  attributeChangedCallback(name, oldValue, newValue) {
    // called when one of attributes listed above is modified
  }

  adoptedCallback() {
    // called when the element is moved to a new document
    // (happens in document.adoptNode, very rarely used)
  }

  // there can be other element methods and properties
}
```

ì´í›„ì—, ì´ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë¸Œë¼ìš°ì €ì—ê²Œ ì•Œë ¤ì£¼ë©´ ìƒˆë¡œìš´ ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
customElment.defind('my-element', MyElement);
```

```html
<my-element></my-element>
```

## Custom elements ìì„¸íˆ ì‚´í´ë³´ê¸°

Shadow DOM, Template ë³´ë‹¤ëŠ” Custom elements ë§Œì„ ì‚¬ìš©í•´ë„ ì›¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê¸°ì— ì¶©ë¶„í•˜ë‹¤ê³  ìƒê°ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ ì´ë²ˆì—ëŠ” ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ì›¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

### constructor()

ìƒì„±ìëŠ” ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ìƒì„±ë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.

ë‚´ë¶€ ìƒíƒœ ê°’ë“¤ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### connectedCallback()

ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë¬¸ì„œì— ì¶”ê°€ë  ë•Œ ë¸Œë¼ìš°ì €ê°€ í˜¸ì¶œí•˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.

ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë Œë”ë§í•˜ê±°ë‚˜(`innerHTML`), ì´ë²¤íŠ¸ë¥¼ í• ë‹¹í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### disconnectedCallback()

ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë¬¸ì„œì—ì„œ ì œê±°ë  ë•Œ ë¸Œë¼ìš°ì €ê°€ í˜¸ì¶œí•˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.

í• ë‹¹ëœ ì´ë²¤íŠ¸ë¥¼ ì§€ì›Œì£¼ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### adoptedCallback()

parent nodeê°€ ë³€ê²½ë˜ë©´ í˜¸ì¶œ ë˜ëŠ”ë°, ê±°ì˜ ì“°ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

### observedAttributes()

ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ì— ì „ë‹¬ëœ ì–´íŠ¸ë¦¬ë·°íŠ¸ ì¤‘ ê°ì‹œí•˜ê³  ì‹¶ì€ ëª©ë¡ì„ ë°°ì—´ë¡œ ë°˜í™˜ì‹œí‚µë‹ˆë‹¤.

### attributeChangedCallback(name, oldValue, newValue)

ìœ„ì—ì„œ ë°˜í™˜í•œ ëª©ë¡ ì¤‘ì— ë³€ê²½ ì‚¬í•­ì´ ìˆìœ¼ë©´ ì‹¤í–‰ë˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.

### ì´ë¦„ ê·œì¹™

ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” ë°˜ë“œì‹œ í•˜ì´í”ˆ(-)ì´ í¬í•¨ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê·œì¹™ì´ ìˆìŠµë‹ˆë‹¤.

```js
customElements.define('my-element', MyElement);
```

## Counter ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ì–´ë³´ê¸°

ì•„ë˜ëŠ” ì œê°€ ë§Œë“  Counter ì»´í¬ë„ŒíŠ¸ ì…ë‹ˆë‹¤.

![](/posts/20240322-js-component/counter.gif)

```js
export class Counter extends HTMLElement {
  constructor() {
    super();
    this.count = 0;
  }

  render() {
    this.innerHTML = `
      <div class='counter'>count: ${this.count}</div>
    `;
  }

  // thisë¥¼ ìƒì–´ë²„ë¦¬ì§€ ì•Šê¸° ìœ„í•´ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•œë‹¤.
  handleClick = () => {
    this.count++;
    this.querySelector('div').innerHTML = `count: ${this.count}`;
  };

  addEvents() {
    this.querySelector('div').addEventListener('click', this.handleClick);
  }

  removeEvents() {
    this.querySelector('div').removeEventListener('click', this.handleClick);
  }

  connectedCallback() {
    if (!this.rendered) {
      this.render();
      this.addEvents();
      this.rendered = true;
    }
  }

  disconnectedCallback() {
    this.rendered = false;
    this.removeEvents();
  }
}
```

ìƒì„±ìì—ì„œ ë‚´ë¶€ ìƒíƒœ ê°’ì„ ì •ì˜í•©ë‹ˆë‹¤.

```js
  constructor() {
    super();
    this.count = 0;
  }
```

ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë¬¸ì„œì— ì¶”ê°€ë  ë•Œ ë Œë”ë§ì„ í•´ì¤ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë„ ë‹¬ì•„ì¤ì‹œë‹¤.

```js
  render() {
    this.innerHTML = `
      <div class='counter'>count: ${this.count}</div>
    `;
  }

  addEvents() {
    this.querySelector('div').addEventListener('click', this.handleClick);
  }

  // thisë¥¼ ìƒì–´ë²„ë¦¬ì§€ ì•Šê¸° ìœ„í•´ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•œë‹¤.
  handleClick = () => {
    this.count++;
    this.querySelector('div').innerHTML = `count: ${this.count}`;
  };

  connectedCallback() {
    if (!this.rendered) {
      this.render();
      this.addEvents();
      this.rendered = true;
    }
  }
```

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ëŠ” ì´ìœ ëŠ”, ì½œë°± í•¨ìˆ˜ë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ê°€ thisë¥¼ ìƒì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” 3ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

```js
// 1. ë˜í¼ í•¨ìˆ˜ë¡œ ê°ì‹¸ê¸°
addEventListener('click', () => this.handleClick); // or
addEventListener('click', function () {
  this.handleClick();
});

// 2. bindë¥¼ ì‚¬ìš©í•˜ê¸°
addEventListener('click', this.handleClick.bind(this));

// 3. í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ê¸°
handleClick = () => {
  this.count++;
  this.querySelector('div').innerHTML = `count: ${this.count}`;
};

addEventListener('click', this.handleClick);
```

ì–´ëŠ ë°©ë²•ì„ ì¨ë„ ì¢‹ì§€ë§Œ, ì €ëŠ” 3ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ í•˜ëŠ” ê²ƒì´ ë‚˜ì¤‘ì— ì‹ ê²½ ì“¸ ì¼ì´ ì ì–´ì§„ë‹¤ê³  ìƒê°í•˜ì—¬ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

[ì „ì²´ ì½”ë“œ](https://github.com/wonkyum-kim/VanillaJSComponent/tree/1.counter)

## ì „ì—­ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ì—¬ Todo List ë§Œë“¤ì–´ë³´ê¸°

### ë‚´ë¶€ ìƒíƒœ ì—…ë°ì´íŠ¸ì™€ ì¬ë Œë”ë§

ë¦¬ì•¡íŠ¸ì—ì„œì˜ useStateì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë‚´ë¶€ ìƒíƒœë¥¼ ë§Œë“¤ê³  ê°’ì„ ì—…ë°ì´íŠ¸ ì‹œ ì¬ë Œë”ë§ì„ ìœ ë°œí•˜ë„ë¡ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?

ìœ„ì˜ Counter ì»´í¬ë„ŒíŠ¸ì—ì„œì²˜ëŸ¼ ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ê·¸ëƒ¥ innerHTMLë¡œ ë‹¤ì‹œ ë Œë”ë§í•˜ë©´ ë©ë‹ˆë‹¤.

```js
handleClick = () => {
  this.count++;
  // ì›í•˜ëŠ” ë¶€ë¶„ë§Œ ì¬ë Œë”ë§í•œë‹¤.
  this.querySelector('div').innerHTML = `count: ${this.count}`;
};
```

render() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë„ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ë§Œ, render()ëŠ” ì»´í¬ë„ŒíŠ¸ ì „ì²´ë¥¼ ì¬ë Œë”ë§í•˜ê¸° ë•Œë¬¸ì—, ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ìœ„ì™€ ê°™ì´ íŠ¹ì • ë¶€ë¶„ë§Œ ì„ íƒí•´ì„œ ì¬ë Œë”ë§ì„ í•˜ëŠ” ë°©ë²•ì´ ë” íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ê°€ìƒ ë”ì„ ì‚¬ìš©í•˜ì—¬ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì¬ë Œë”ë§ì„ í•˜ì§€ë§Œ, ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ ì¬ë Œë”ë§ì„ í•´ì¤„ ë¶€ë¶„ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.

### ì „ì—­ ìƒíƒœì˜ í•„ìš”ì„±

ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ë¥¼ í•˜ê³  ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨ì‹œì¼œ ì¬ë Œë”ë§ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëƒ¥ render()ë¥¼ í˜¸ì¶œí•˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ì–´íŠ¸ë¦¬ë·°íŠ¸ì— ìƒíƒœì˜ ìµœì‹  ê°’ì„ ì „ë‹¬ ì‹œì¼œ ì¬ë Œë”ë§ì´ ê°€ëŠ¥í•˜ë‹ˆê¹Œìš”...

í•˜ì§€ë§Œ, ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤ê±°ë‚˜ í˜•ì œ ì»´í¬ë„ŒíŠ¸ë¼ë¦¬ ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ê²ƒì€ í˜ë“­ë‹ˆë‹¤.

ì™œëƒí•˜ë©´, ì œê°€ ë§Œë“  ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë Œë”ë§ì„ ë¬¸ìì—´ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì•„ë˜ëŠ” ì•ìœ¼ë¡œ ë§Œë“¤ todo list ì•±ì˜ êµ¬ì¡°ì…ë‹ˆë‹¤.

`app-input`ì—ì„œ `app-status`ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì „ì—­ ìƒíƒœë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

![](/posts/20240322-js-component/structure1.png)

### ì „ì—­ ìƒíƒœ ë§Œë“¤ì–´ë³´ê¸°

ì „ì—­ ìƒíƒœëŠ” `Pub-Sub íŒ¨í„´`ì„ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

subscriberëŠ” ì „ì—­ ìƒíƒœê°€ ë³€ê²½ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ì½œë°± í•¨ìˆ˜ë“¤ì„ storeì— ë§¡ê²¨ë‘¡ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ publisherê°€ ì „ì—­ ìƒíƒœë¥¼ ë³€ê²½í•˜ì˜€ì„ ë•Œ subscriberê°€ ë§¡ê²¨ë‘” ì½œë°± í•¨ìˆ˜ë“¤ì„ ì „ë¶€ ì‹¤í–‰ì‹œì¼œì£¼ê²Œ ë©ë‹ˆë‹¤.

ì´ ì½œë°± í•¨ìˆ˜ë“¤ì€ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì¬ë Œë”ë§ì„ í•˜ëŠ” ì—­í• ì„ ë§¡ìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ì „ì—­ ìƒíƒœê°€ ë³€ê²½ë˜ë©´, ìë™ìœ¼ë¡œ ì¬ë Œë”ë§ì„ ìœ ë°œ ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²ƒì´ì£ .

zustandì˜ ì½”ë“œë¥¼ ì°¸ê³ í•´ì„œ ì „ì—­ ìƒíƒœë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

```js:vanillaStore.js {11}
export function createStore(createState) {
  let currState;
  const listeners = new Set();

  const getState = () => currState;

  const setState = (partial) => {
    const nextState = partial(currState);
    const prevState = currState;
    currState = Object.assign({}, currState, nextState);
    listeners.forEach((listener) => listener(currState, prevState));
  };

  const subscribe = (listener) => {
    listeners.add(listener);
    return () => listeners.delete(listener);
  };

  currState = createState(setState);

  return { getState, setState, subscribe };
}
```

ì „ì—­ ìƒíƒœëŠ” `currState`ì— ë“¤ì–´ìˆìŠµë‹ˆë‹¤.

í´ë¡œì €ë¥¼ ì‚¬ìš©í•´ì„œ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ì£ .

ìƒíƒœê°€ ë³€ê²½ë˜ë©´(`setState`), listenersì— ë“¤ì–´ìˆëŠ” ëª¨ë“  ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

```js:todoStore.js
import { createStore } from '../state/vanillaStore.js';

export const todoStore = createStore((set) => ({
  items: [],
  addItem: (item) => set((prev) => ({ items: [...prev.items, item] })),
  deleteItem: (idx) =>
    set((prev) => ({
      items: [...prev.items.slice(0, idx), ...prev.items.slice(idx + 1)],
    })),
}));
```

ì´ì œ ì „ì—­ ìƒíƒœì¸ todoStoreë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ì´ì œ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ìŠ¤í† ì–´ë¡œ ì¬ë Œë”ë§ì„ ìœ ë°œì‹œí‚¤ëŠ” ì½œë°± í•¨ìˆ˜ë“¤ì„ ì „ë‹¬í•˜ê³ , ìŠ¤í† ì–´ëŠ” ì „ì—­ ìƒíƒœë¥¼ ë³€ê²½ ì‹œí‚¬ ë•Œ ê·¸ ì½œë°± í•¨ìˆ˜ë“¤ì„ ì‹¤í–‰ì‹œì¼œ ì¬ë Œë”ë§ì„ í•©ë‹ˆë‹¤.

![](/posts/20240322-js-component/structure2.png)

```js:app-input.js {6}
import { todoStore } from '../store/todoStore.js';

export class AppInput extends HTMLElement {
  constructor() {
    super();
    todoStore.subscribe(this.renderList.bind(this));
  }

  render() {
    this.innerHTML = `
        <section class="app">
        <h2 class="app__heading">ì˜¤ëŠ˜ í•  ì¼</h2>
        <ul class="todo-items"></ul>
        <form>
            <label for="new-item-field">
              í•  ì¼ì„ ì¶”ê°€í•˜ì„¸ìš”
            </label>
            <input
              type="text"
              id="new-item-field"
              autocomplete="off"
            />
            <button type='submit'>ì €ì¥</button>
            </div>
        </form>
        </section>
    `;
  }

  renderList() {
    const list = todoStore.getState().items.reduce((acc, item) => {
      return acc + `<li>${item}<button class="rm">Ã—</button></li>`;
    }, '');

    this.querySelector('.todo-items').innerHTML = list;

    this.querySelectorAll('.rm').forEach((btn, idx) => {
      btn.addEventListener('click', () => {
        this.onDelete(idx);
      });
    });
  }

  onDelete = (idx) => {
    todoStore.getState().deleteItem(idx);
  };

  onSubmit = (event) => {
    event.preventDefault();

    const inputElement = document.getElementById('new-item-field');
    const item = inputElement.value.trim();
    inputElement.value = '';

    todoStore.getState().addItem(item);
  };

  connectedCallback() {
    if (!this.rendered) {
      this.render();
      this.querySelector('form').addEventListener('submit', this.onSubmit);
      this.rendered = true;
    }
  }

  disconnectedCallback() {
    this.querySelector('form').removeEventListener('submit', this.onSubmit);
    this.rendered = false;
  }
}
```

ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸(app-input)ì—ì„œ ì „ì—­ ìƒíƒœë¥¼ ë³€ê²½ì‹œì¼°ë‹¤ë©´, ëª¨ë“  ì½œë°± í•¨ìˆ˜ë“¤ì´ ì‹¤í–‰ë˜ë¯€ë¡œ ìë™ìœ¼ë¡œ ì´ ì»´í¬ë„ŒíŠ¸(app-status)ë„ ì¬ë Œë”ë§ì´ ë©ë‹ˆë‹¤.

```js:app-status.js {6}
import { todoStore } from '../store/todoStore.js';

export class AppStatus extends HTMLElement {
  constructor() {
    super();
    todoStore.subscribe(this.render.bind(this));
  }

  render() {
    this.innerHTML = `
        <aside class="app__status">
            <div>
                <small>ì˜¤ëŠ˜ í•  ì¼ì´</small>
                <span>${todoStore.getState().items.length}</span>
                <small>ê°œ ë‚¨ì•˜ì–´ìš”. ğŸ˜¢</small>
            </div>
        </aside>
    `;
  }

  connectedCallback() {
    if (!this.rendered) {
      this.render();
      this.rendered = true;
    }
  }

  disconnectedCallback() {
    this.rendered = false;
  }
}
```

![](/posts/20240322-js-component/todo.gif)

[ì „ì²´ ì½”ë“œ](https://github.com/wonkyum-kim/VanillaJSComponent/tree/3.todo2)

## References

- [ê¸°ì¡´ web siteë¥¼ components ë¡œ ë‹¤ì‹œ ë§Œë“¤ê¸° (No State management)](https://enumclass.tistory.com/228)
- [Build a state management system with vanilla JavaScript](https://css-tricks.com/build-a-state-management-system-with-vanilla-javascript/)
- [zustand](https://github.com/pmndrs/zustand)
- [Custom elements](https://ko.javascript.info/custom-elements)
