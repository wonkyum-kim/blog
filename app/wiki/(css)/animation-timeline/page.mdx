import { CodeSelector } from '@/components/code-selector.tsx'

## scroll progress timeline

스크롤 가능한 엘리먼트(scroller)가 스크롤 하면 애니메이션이 진행된다.

### scroll-timeline-name

scroller에 `scroll-timeline-name` 프로퍼티를 지정하고, 애니메이션이 진행될 엘리먼트에 `animation-timeline` 프로퍼티로 연결한다.

아래 코드에서 container의 height를 300px로 설정하고, stretcher의 height를 600px로 설정하여 overflow가 발생하고 스크롤을 할 수 있도록 하였다.

<CodeSelector names={['html', 'css']} desc='scroll-time-line' />

```html showLineNumbers
<div id="container">
  <div id="square"></div>
  <div id="stretcher"></div>
</div>
```

```css {4, 16} showLineNumbers
#container {
  height: 300px;
  overflow-y: scroll;
  scroll-timeline-name: --squareTimeline;
  position: relative;
}

#square {
  background-color: deeppink;
  width: 100px;
  height: 100px;
  margin-top: 100px;
  animation-name: rotateAnimation;
  animation-duration: 1ms; /* Firefox requires this to apply the animation */
  animation-direction: alternate;
  animation-timeline: --squareTimeline;

  position: absolute;
  bottom: 0;
}

@keyframes rotateAnimation {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

#stretcher {
  height: 600px;
}
```

### scroll()

scroller에 `scroll-timeline-name` 프로퍼티를 지정하지 않고, `scroll()`을 사용하여 가장 가까운 부모 엘리먼트의 스크롤에 따라 애니메이션을 적용시킬 수 있다.

<CodeSelector names={['css']} desc='scroll' />

```css {18} showLineNumbers
#container {
  height: 300px;
  overflow-y: scroll;
  position: relative;
}

#square {
  background-color: deeppink;
  width: 100px;
  height: 100px;
  margin-top: 100px;
  position: absolute;
  bottom: 0;

  animation-name: rotateAnimation;
  animation-duration: 1ms; /* Firefox requires this to apply the animation */
  animation-direction: alternate;
  animation-timeline: scroll();
}

@keyframes rotateAnimation {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

#stretcher {
  height: 600px;
}
```

## view progress timeline

엘리먼트(subject)의 visibility가 변함에 따라서 애니메이션을 적용시킬 수 있다.

### view-timeline-name

subject에 `view-timeline-name` 프로퍼티를 지정하면, 뷰포트에 보이기 시작하는 지점부터 애니메이션이 시작되고, 전부 보이는 시점에서 애니메이션이 마무리된다.

<CodeSelector names={['css']} desc='view-timeline-name' />

```css {2-3} showLineNumbers
.animation {
  view-timeline-name: --subjectReveal;
  animation-timeline: --subjectReveal;
  animation-name: appear;
  animation-fill-mode: both;
  animation-duration: 1ms; /* Firefox requires this to apply the animation */
}
```

### view()

subject에 `view-timeline-name`을 지정하지 않고 `view()`를 사용해도 같은 결과가 나온다.

<CodeSelector names={['css']} desc='view' />

```css {2} showLineNumbers
.animation {
  animation-timeline: view();
  animation-name: appear;
  animation-fill-mode: both;
  animation-duration: 1ms; /* Firefox requires this to apply the animation */
}
```

## References

- [animation-timeline](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timeline)
