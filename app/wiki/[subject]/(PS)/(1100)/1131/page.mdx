import { CodeSelector } from '@/components/code-selector.tsx'

## 숫자

각 수열은 사이클을 포함하고 있다.

방문하지 않은 노드를 white, 방문한 노드를 gray라고 표현했을 때 gray 노드를 다시 방문한다면 사이클을 확인할 수 있다.

다시 말하면, 방문한 노드를 gray로 만들고 dfs를 실행시킬 때, 다시 gray 노드를 만나면 사이클에 진입한 것이다.

사이클에서는 가장 작은 노드를 찾고, 사이클에 속한 모든 노드에 그 값으로 설정한다.

<CodeSelector names={['1131.js']} desc='ex1' />

```js showLineNumbers {24-37}
const dp = new Array(10000001).fill(0)
const [a, b, k] = [0, 0, 0].map(() => input.getNumber)
const power = new Array(10).fill(0).map((item, index) => index ** k)
const white = 0
const gray = -1

function next(n) {
  let sum = 0
  while (n > 0) {
    sum += power[n % 10]
    n = Math.floor(n / 10)
  }
  return sum
}

function dfs(curr) {
  if (dp[curr] !== white && dp[curr] !== gray) return dp[curr]
  if (dp[curr] === white) {
    dp[curr] = gray
    dp[curr] = dfs(next(curr))
    dp[curr] = Math.min(dp[curr], curr)
    return dp[curr]
  }
  if (dp[curr] === gray) {
    // 사이클을 두 번 돈다.
    let min = curr
    let i = curr
    do {
      min = Math.min(min, i)
      i = next(i)
    } while (i !== curr)
    do {
      dp[i] = min
      i = next(i)
    } while (i !== curr)
    return dp[curr]
  }
}

function solve() {
  let ans = 0

  for (let i = a; i <= b; ++i) ans += dfs(i)
  console.log(ans)
}

solve()
```
