import { CodeSelector } from '@/components/code-selector.tsx'

## React란 무엇인가

`React`는 사용자 인터페이스를 만들기 위한 JavaScript 라이브러리다.

## 선언적인 UI

대화형 UI를 설계할 때, `명령적인(imperative)` 방법과 `선언적인(declarative)` 방법을 고려할 수 있다.

각 엘리먼트에 명령을 내려 컴퓨터에게 UI 업데이트 방법을 알려주는 것을 명령적인 방법이라고 한다.

명령적으로 UI를 다루는 것은 복잡해질수록 관리하는데 어려움이 발생한다.

UI를 선언적으로 다룬다는 것은, 구체적인 명령 없이 보여주고 싶은 것을 선언하기만 하면 된다는 의미다.

React를 사용하여 선언적으로 UI를 다루는 과정은 아래와 같다.

개발자는 상태에 따라서 사용자가 보게 될 모든 UI를 시각화한다. (= 코드를 작성한다.)

상호작용에 의해 상태가 변경되면, React는 변경된 상태에 대한 UI로 렌더링한다. 이때 React는 해당 컴포넌트만 효율적으로 상태를 업데이트하고 렌더링한다.

## 컴포넌트

React에서는 자체적인 상태를 관리하는 캡슐화된 컴포넌트를 만들고, 복잡한 UI들을 만들기 위해 그 컴포넌트들을 구성한다.

컴포넌트는 JSX 문법으로 작성할 수 있는데, 이는 Babel의 `@babel/preset-react` 프리셋이 빌드 타임에 JSX 문법을 자바스크립트로 변환시켜주기 때문에 가능하다.

컴포넌트 로직은 HTML이 아닌 자바스크립트(JSX)로 작성되므로, 앱을 통해 풍부한 데이터를 쉽게 전달하고 DOM 밖에서 상태를 유지할 수 있다.

## 용어 정리

패키지를 살펴보기 전에 몇 가지 용어를 정리하고 넘어간다.

### React node

`React node`는 함수형 컴포넌트가 반환할 수 있는 모든 것을 의미한다. (null, undefined, booleans, strings, numbers, React elements)

### React element

`React element`는 JSX 태그 또는 createElement가 반환하는 객체를 의미한다. (결국 JSX는 Babel에 의해 createElement로 변환된다.)

<CodeSelector names={['react/src/jsx/ReactJSXElement.js']} desc='ex1' />

```js
function ReactElement(/* ... */) {
  // ...
  const element = {
    $$typeof: REACT_ELEMENT_TYPE,
    type,
    key,
    ref,
    props,
  }
  // ...
  return element
}
```

### Render

`Render(렌더링)`은 브라우저의 렌더링과는 다른 의미로 사용된다.

React에서 렌더링은 컴포넌트를 호출하는 것을 의미한다. (“Rendering” is React calling your components.)

컴포넌트를 호출한다는 의미는 결국 `React element`를 반환한다는 것이다.

그리고 업데이트된 컴포넌트는 자신 뿐만 아니라 중첩되어 있는 모든 컴포넌트의 렌더링을 유발한다.

(단, children으로 중첩된 컴포넌트의 재렌더링은 발생하지 않는다.)

### Commit

`Commit(커밋)`은 컴포넌트의 렌더링 이후에 React가 DOM을 수정하는 과정을 의미한다.

이때, React는 렌더링 사이에 차이가 발생한 부분만 DOM 노드를 변경한다.

### Fiber Tree

`Fiber`는 처리 되어야 하거나 처리 된 컴포넌트에 대한 작업을 나타내는 객체로, 단일 연결 리스트를 사용하여 트리 구조를 이루고 있다.

Fiber 트리는 2종류가 있으며 현재 모습을 나타내는 `current`와 작업 중인 상태를 나타내는 `workInProgress`가 있다.

따라서 컴포넌트 하나당 하나 이상의 Fiber 객체가 존재할 수 있다.

React는 current를 기준으로 작업을 하여 새로운 workInProgress 트리를 만들고 current를 workInProgress로 교체하는 방법을 사용한다.
