import { CodeSelector } from '@/components/code-selector.tsx'

## 벡터

2차원 공간의 모든 벡터 집합을 $R^2$로 표시하고, 3차원 공간의 모든 벡터를 $R^3$로 표시한다 ("$R$"은 "실수(real)"라는 단어를 나타낸다).

- 2차원 공간에서 점 $P_1(x_1,y_1)$에서 시작해서 점 $P_2(x_2,y_2)$으로 끝나는 벡터는 $\overrightarrow{P_1P_2}$ = $(x_2 - x_1, y_2 - y_1)$이다.
- 3차원 공간에서 점 $P_1(x_1,y_1,z_1)$에서 시작해서 점 $P_2(x_2,y_2,z_2)$으로 끝나는 벡터는 $\overrightarrow{P_1P_2}$ = $(x_2 - x_1, y_2 - y_1, z_2 - z_1)$이다.

$n$이 양의 정수이면, **순서가 있는 $n$-튜플**은 실수 $n$개의 수열 $(v_1, v_2, \ldots, v_n)$이다.

모든 순서가 있는 $n$-튜플은 $n$차원 공간이라 하고, $R^n$으로 표시한다.

한 벡터가 다른 벡터의 스칼라배 일 때, $R^n$의 두 벡터는 **평행**하다고 한다.

이때 스칼라가 양수이면 두 벡터는 같은 방향을 가지고 있다고 말하고 음수이면 서로 다른 방향을 가지고 있다고 한다.

$R^n$의 벡터 $\mathbf{v} = (v_1, v_2, \ldots, v_n)$의 길이(length, norm)는 $\begin{Vmatrix} \mathbf{v} \end{Vmatrix} = \sqrt{v_1^2 + v_2^2 + v_3^2 + \cdots + v_n^2}$와 같이 나타낸다.

## 내적

$R^n$의 벡터 $\mathbf{u} = (u_1, u_2, \ldots, u_n)$와 $\mathbf{v} = (v_1, v_2, \ldots, v_n)$의 `내적(dot product, Euclidean inner product)`은 $\mathbf{u} \cdot \mathbf{v} = u_1v_1 + u_2v_2 + \cdots + u_nv_n$이다.

두 벡터의 내적을 하는 이유는 두 벡터가 이루는 **각도**를 알 수 있기 때문이다.

0벡터가 아닌 $R^2$ 또는 $R^3$의 두 벡터 $\mathbf{u}$와 $\mathbf{v}$의 각도는 $\cos\theta = \frac {\mathbf{u} \cdot \mathbf{v}} {\begin{Vmatrix} \mathbf{u} \end{Vmatrix} \begin{Vmatrix} \mathbf{v} \end{Vmatrix}}$로 구할 수 있다.

## 직선의 벡터 방정식

$R^2$에 있는 한 직선을 지나는 두 점을 알고 있다면, 직선의 방정식을 구할 수 있다. ($-\infty$ < t < $\infty$)

- $x = (1-t)x_0 + tx_1$
- $y = (1-t)y_0 + ty_1$

예를 들어, (1, 3)과 (2, 4)를 지나는 두 직선은 아래와 같다.

$(x, y) = (1 - t)(1, 3) + t(2, 4) = (1 + t, 3 + t)$

$t$를 0과 1 사이로 제한하면 **선분**을 구할 수 있다.

$R^3$의 직선과 선분도 똑같은 방법을 통해 구할 수 있다.

## 평면의 벡터 방정식

$\mathbf{x_0} = (x_0, y_0, z_0)$을 지나고, 두 벡터 $\mathbf{v_1} = (a_1, b_1, c_1)$와 $\mathbf{v_2} = (a_2, b_2, c_2)$에 평행한 평면의 방정식은 $(x,y,z)=(x_0, y_0, z_0)+t1(a_1,b_1,c1)+t2(a_2, b_2, c_2)$이다. ($-\infty < t_1, t_2 < \infty$)

## 외적

벡터 $a=(x_1, y_1)$과 $b=(x_2,y_2)$의 `외적` $a \times b$는 $x_1y_2 - x_2y_1$로 정의된다.

<CodeSelector names={['crossProduct.js']} desc='ex0' />

```js
function vector(a, b) {
  return [b[0] - a[0], b[1] - a[1]]
}

function crossProduct(a, b) {
  return a[0] * b[1] - a[1] * b[0]
}
```

## 삼각형의 넓이

삼각형의 넓이는 외적을 통해 구할 수 있다.

<CodeSelector names={['crossProduct.js']} desc='ex00' />

```js
function triangleArea(a, b, c) {
  return Math.abs(vector(a, b), vector(a, c)) / 2
}
```

## 직선과 점의 위치

외적을 통해서 벡터 a의 끝에 벡터 b를 두었을 때 어느 방향을 가리키는지 알 수 있다.

- $a \times b > 0$: b는 왼쪽으로 회전
- $a \times b = 0$: b는 0 또는 180도 회전
- $a \times b < 0$: b는 오른쪽으로 회전

<CodeSelector names={['ccw.js']} desc='ex1' />

```js
function ccw(a, b, c) {
  const ab = vector(a, b)
  const bc = vector(b, c)
  return crossProduct(ab, bc)
}
```

이를 응용하면 어느 직선이 점 $s_1$에서 점 $s_2$ 방향으로 지나가고 있을 때, 어떤 점 $p$가 직선의 어느 쪽에 놓여 있는지 확인할 수 있다.

<CodeSelector names={['ccw.js']} desc='ex2' />

```js
const dir = ccw(s1, s2, p)

if (dir > 0) console.log('left')
else if (dir < 0) console.log('right')
else console.log('same')
```

## 점과 직선 사이의 최단 거리

점 p에서 점 $s_1$, $s_2$를 지나는 직선까지의 최단 거리를 d라고 할 때, 삼각형의 넓이는 위에서 살펴본 방법과, |$s_1$ - $s_2$| x d / 2 두 방법이 있으며 서로 같아야 한다.

따라서 $d = {|(s_1 - p) \times (s_2 - p)| \over |s_1 - s_2|}$를 유도할 수 있다.

<CodeSelector names={['dist.js']} desc='ex3' />

```js
const d = Math.abs(crossProduct(vector(p, s1), vector(p, s2))) / Math.hypot(s1, s2)
```

## 선분 교차

선분이 서로 교차하는 경우는 아래와 같다.

1. 한 선분에 대해 다른 선분의 양 끝점이 서로 다른 방향에 놓여 있을 때
2. 한 점이 다른 선분 위에 있을 때

<CodeSelector names={['dist.js']} desc='ex4' />

```js
function onSegment(a, b, c) {
  const minX = Math.min(a[0], b[0])
  const maxX = Math.max(a[0], b[0])
  const minY = Math.min(a[1], b[1])
  const maxY = Math.max(a[1], b[1])
  return minX <= c[0] && c[0] <= maxX && minY <= c[1] && c[1] <= maxY
}

function segementsIntersect(p1, p2, p3, p4) {
  const d1 = ccw(p3, p4, p1)
  const d2 = ccw(p3, p4, p2)
  const d3 = ccw(p1, p2, p3)
  const d4 = ccw(p1, p2, p4)

  // 한 선분에 대해 다른 선분의 양 끝점이 서로 다른 방향에 놓여 있을 때
  if (((d1 > 0 && d2 < 0) || (d1 < 0 && d2 > 0)) && ((d3 > 0 && d4 < 0) || (d3 < 0 && d4 > 0)))
    return true
  // 한 점이 다른 선분 위에 있을 때
  else if (d1 == 0 && onSegment(p3, p4, p1)) return true
  else if (d2 == 0 && onSegment(p3, p4, p2)) return true
  else if (d3 == 0 && onSegment(p1, p2, p3)) return true
  else if (d4 == 0 && onSegment(p1, p2, p4)) return true
  else return false
}
```

## 다각형 내부의 점 판별

주어진 점이 다각형의 내부와 외부 중 어느 쪽에 있는지를 판별할 수 있다.

먼저 주어진 점에서 임의의 방향으로 긴 선분을 만들고 이 선분이 다각형의 경계와 만나는 횟수를 세면 된다.

횟수가 홀수면 내부에 있는 것이고 짝수면 외부에 있게 된다.

TODO...
