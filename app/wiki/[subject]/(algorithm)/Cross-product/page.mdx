import { CodeSelector } from '@/components/code-selector.tsx'

## 외적

벡터 $a=(x_1, y_1)$과 $b=(x_2,y_2)$의 `외적` $a \times b$는 $x_1y_2 - x_2y_1$로 정의된다.

<CodeSelector names={['crossProduct.js']} desc='ex0' />

```js
function vector(a, b) {
  return [b[0] - a[0], b[1] - a[1]]
}

function crossProduct(a, b) {
  return a[0] * b[1] - a[1] * b[0]
}
```

## 삼각형의 넓이

삼각형의 넓이는 외적을 통해 구할 수 있다.

<CodeSelector names={['crossProduct.js']} desc='ex00' />

```js
function triangleArea(a, b, c) {
  return Math.abs(vector(a, b), vector(a, c)) / 2
}
```

## 직선과 점의 위치

외적을 통해서 벡터 a의 끝에 벡터 b를 두었을 때 어느 방향을 가리키는지 알 수 있다.

- $a \times b > 0$: b는 왼쪽으로 회전
- $a \times b = 0$: b는 0 또는 180도 회전
- $a \times b < 0$: b는 오른쪽으로 회전

<CodeSelector names={['ccw.js']} desc='ex1' />

```js
function ccw(a, b, c) {
  const ab = vector(a, b)
  const bc = vector(b, c)
  return crossProduct(ab, bc)
}
```

이를 응용하면 어느 직선이 점 $s_1$에서 점 $s_2$ 방향으로 지나가고 있을 때, 어떤 점 $p$가 직선의 어느 쪽에 놓여 있는지 확인할 수 있다.

<CodeSelector names={['ccw.js']} desc='ex2' />

```js
const dir = ccw(s1, s2, p)

if (dir > 0) console.log('left')
else if (dir < 0) console.log('right')
else console.log('same')
```

## 점과 직선 사이의 최단 거리

점 p에서 점 $s_1$, $s_2$를 지나는 직선까지의 최단 거리를 d라고 할 때, 삼각형의 넓이는 위에서 살펴본 방법과, |$s_1$ - $s_2$| x d / 2 두 방법이 있으며 서로 같아야 한다.

따라서 $d = {|(s_1 - p) \times (s_2 - p)| \over |s_1 - s_2|}$를 유도할 수 있다.

<CodeSelector names={['dist.js']} desc='ex3' />

```js
const d = Math.abs(crossProduct(vector(p, s1), vector(p, s2))) / Math.hypot(s1, s2)
```

## 선분 교차

선분이 서로 교차하는 경우는 아래와 같다.

1. 한 선분에 대해 다른 선분의 양 끝점이 서로 다른 방향에 놓여 있을 때
2. 한 점이 다른 선분 위에 있을 때

<CodeSelector names={['dist.js']} desc='ex4' />

```js
function onSegment(a, b, c) {
  const minX = Math.min(a[0], b[0])
  const maxX = Math.max(a[0], b[0])
  const minY = Math.min(a[1], b[1])
  const maxY = Math.max(a[1], b[1])
  return minX <= c[0] && c[0] <= maxX && minY <= c[1] && c[1] <= maxY
}

function segementsIntersect(p1, p2, p3, p4) {
  const d1 = ccw(p3, p4, p1)
  const d2 = ccw(p3, p4, p2)
  const d3 = ccw(p1, p2, p3)
  const d4 = ccw(p1, p2, p4)

  // 한 선분에 대해 다른 선분의 양 끝점이 서로 다른 방향에 놓여 있을 때
  if (((d1 > 0 && d2 < 0) || (d1 < 0 && d2 > 0)) && ((d3 > 0 && d4 < 0) || (d3 < 0 && d4 > 0)))
    return true
  // 한 점이 다른 선분 위에 있을 때
  else if (d1 == 0 && onSegment(p3, p4, p1)) return true
  else if (d2 == 0 && onSegment(p3, p4, p2)) return true
  else if (d3 == 0 && onSegment(p1, p2, p3)) return true
  else if (d4 == 0 && onSegment(p1, p2, p4)) return true
  else return false
}
```

## 다각형 내부의 점 판별

주어진 점이 다각형의 내부와 외부 중 어느 쪽에 있는지를 판별할 수 있다.

먼저 주어진 점에서 임의의 방향으로 긴 선분을 만들고 이 선분이 다각형의 경계와 만나는 횟수를 세면 된다.

횟수가 홀수면 내부에 있는 것이고 짝수면 외부에 있게 된다.

TODO...
