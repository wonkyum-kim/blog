import { CodeSelector } from '@/components/code-selector.tsx'

## squash

여러 개의 커밋을 하나로 합칠 때 사용한다.

먼저 합칠 커밋을 확인한다.

<CodeSelector names={['shell']} desc='log' />

```shell
git log
```

예를 들어 위에서 3개의 커밋을 합칠 것이라면,

<CodeSelector names={['shell']} desc='head3' />

```shell
git rebase -i HEAD~3
```

그리고 `pick`으로 되어 있는 부분에 합쳐질 것은 `squash`로 변경한다.

<CodeSelector names={['shell']} desc='text' />

```txt {2-3}
pick ****** commit-m1
squash ****** commit-m2
squash ****** commit-m3
```

저장하고 나가면, 이제 커밋 메시지를 수정하라고 한다.

쓰고 싶은 커밋 메시지만 남기고 나머지는 주석처리하면 된다.

## 원격 저장소의 커밋에 스쿼시 하는 경우

다른 사람들이 pull을 하지 않았다는 가정 하에 위 방법을 진행하고 push한다.

<CodeSelector names={['shell']} desc='pushf' />

```shell
git push -f
```

만약 다른 사람들이 pull 한적이 있다면...

그 사람은 먼저 stash에 현재 작업물을 저장시키고

<CodeSelector names={['shell']} desc='stash' />

```shell
git stash push -a
```

오리진 기준으로 브랜치를 초기화한다.

<CodeSelector names={['shell']} desc='reset' />

```shell
git reset --hard origin/main
```

그리고 stash에서 다시 꺼낸다.

<CodeSelector names={['shell']} desc='pop' />

```shell
git stash pop
```
