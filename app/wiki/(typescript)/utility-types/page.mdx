import { CodeSelector } from '@/components/code-selector.tsx'

## Utility Types

타입 변환을 편하게 하기 위해서 전역적으로 사용가능한 타입스크립트가 제공하는 도구를 의미한다.

## Awaited

Promise를 벗겨내서 (unwrap) 타입을 가져오는 것과 같다.

<CodeSelector names={['Awaited']} desc='awaited' />

```ts
type A = Awaited<Promise<number>> // number
type B = Awaited<Promise<Promise<number>>> // number
type C = Awaited<boolean | Promise<number>> // number | boolean
```

## Partial vs Required

- Partial: 모든 프로퍼티를 옵셔널로 만든다.
- Required: 모든 프로퍼티를 필수로 만든다.

## ReadOnly

객체의 프로퍼티의 값을 변경하지 못하도록 한다.

<CodeSelector names={['ReadOnly']} desc='readonly' />

```ts
interface Todo {
  title: string
}

const todo: Readonly<Todo> = {
  title: 'Delete inactive users',
}

// error
todo.title = 'Hello'
```

## Record

객체의 키는 `Keys`가 되고 각 키의 타입은 `Type`이 된다.

<CodeSelector names={['Record']} desc='record' />

```ts
// Type
interface CatInfo {
  age: number
  breed: string
}

// Keys
type CatName = 'miffy' | 'boris' | 'mordred'

const cats: Record<CatName, CatInfo> = {
  miffy: { age: 10, breed: 'Persian' },
  boris: { age: 5, breed: 'Maine Coon' },
  mordred: { age: 16, breed: 'British Shorthair' },
}
```

## Pick vs Omit

- Pick: `Type`에서 `Keys`만 사용한다.
- Omit: `Type`에서 `Keys`만 사용하지 않는다.

<CodeSelector names={['Pick', 'Omit']} desc='pickomit' />

```ts
// Type
interface Todo {
  title: string
  description: string
  completed: boolean
}

// Keys
type Selected = 'title' | 'completed'

type TodoPreview = Pick<Todo, Selected>

const todo: TodoPreview = {
  title: 'Clean room',
  completed: false,
}
```

```ts
// Type
interface Todo {
  title: string
  description: string
  completed: boolean
  createdAt: number
}

// Keys
type Selected = 'title' | 'description'

type TodoPreview = Omit<Todo, Selected>

const todo: TodoPreview = {
  completed: false,
  createdAt: 1615544252770,
}
```

## Exclude vs Extract

- Exclude: `UnionType` 에서 `ExcludedMembers`만 사용하지 않는다.
- Extract: `UnionType`에서 `ExtractedMembers`과 겹치는 것만 사용한다.

<CodeSelector names={['Exclude', 'Extract']} desc='excludeextract' />

```ts
// Exclude<UnionType, ExcludeMembers>
type T1 = Exclude<'a' | 'b' | 'c', 'a' | 'b'> // 'c'
type T2 = Exclude<'a' | 'b' | 'c', 'a' | 'd'> // 'b' | 'c'
```

```ts
// Extract<UnionType, ExtractedMembers>
type T0 = Extract<'a' | 'b' | 'c', 'a' | 'f'> // 'a'
```

## NonNullable

null과 undefined를 제거한다.

<CodeSelector names={['NonNullable']} desc='NonNullable' />

```ts
type T0 = NonNullable<string | number | undefined | null> // string | number
```

## Parameters

함수의 파라미터 튜플 타입을 제공한다.

<CodeSelector names={['Parameters']} desc='Parameters' />

```ts
type T0 = Parameters<() => string> // []
type T1 = Parameters<(s: string) => void> // [s: string]
type T2 = Parameters<(s: string, t: number) => void> // [s: string, t: number]
```

## ConstructorParameters

생성자 함수의 파라미터 튜플 타입을 제공한다.

<CodeSelector names={['ConstructorParameters']} desc='ConstructorParameters' />

```ts
class C {
  constructor(a: number, b: string) {}
}

type T3 = ConstructorParameters<typeof C> // [a: number, b: string]
```

## ReturnType

함수의 반환 값 타입을 제공한다.

<CodeSelector names={['ReturnType']} desc='ReturnType' />

```ts
type T0 = ReturnType<() => string> // string
```

## InstanceType

생성자 함수의 인스턴스 타입을 제공한다.

<CodeSelector names={['InstanceType']} desc='InstanceType' />

```ts
class C {
  x = 0
  y = 0
}

type T0 = InstanceType<typeof C> // C
```

## NoInfer

타입추론에 포함시키지 않도록 한다.

<CodeSelector names={['NoInfer']} desc='NoInfer' />

```ts
function createStreetLight<C extends string>(colors: C[], defaultColor?: NoInfer<C>) {
  // ...
}

// NoInfer를 사용하지 않았다면, C는 "red" | "yellow" | "green" | "blue"으로 추론되며,
// defaultColor가 'blue'인경우 에러가 발생하지 않는다.
createStreetLight(['red', 'yellow', 'green'], 'red') // OK
createStreetLight(['red', 'yellow', 'green'], 'blue') // Error
```
